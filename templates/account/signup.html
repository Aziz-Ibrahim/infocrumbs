{% extends "account/base.html" %}
{% load static %}
{% load crispy_forms_tags %}

{% block title %}Sign Up - InfoCrumbs{% endblock %}

{% block content %}
<div class="container login-container gradient-border glow">
    <h2 class="text-light">
        Create Your Account
    </h2>

    <div class="row">
        <div class="col text-light login-form">
            <form method="post" action="{% url 'account_signup' %}">
                {% csrf_token %}

                <div class="row">
                    <!-- Left column -->
                    <div class="col-md-6">
                        <div class="mb-3">
                            {{ form.username.label_tag }}
                            {{ form.username }}
                        </div>
                        <div class="mb-3">
                            {{ form.first_name.label_tag }}
                            {{ form.first_name }}
                        </div>
                        <div class="mb-3">
                            {{ form.last_name.label_tag }}
                            {{ form.last_name }}
                        </div>
                        <div class="mb-3">
                            {{ form.email.label_tag }}
                            {{ form.email }}
                        </div>
                    </div>

                    <!-- Right column -->
                    <div class="col-md-6">
                        <div class="mb-3">
                            {{ form.date_of_birth.label_tag }}
                            {{ form.date_of_birth }}
                        </div>
                        <div class="mb-3 position-relative">
                            {{ form.password1.label_tag }}
                            {{ form.password1 }}
                            <i class="fa-regular fa-eye toggle-password mt-2" data-target="id_password1"></i>
                        </div>
                        <div class="mb-3 position-relative">
                            {{ form.password2.label_tag }}
                            {{ form.password2 }}
                            <i class="fa-regular fa-eye toggle-password mt-2" data-target="id_password2"></i>
                        </div>
                        <div class="mb-3">
                            <button type="submit" class="neon-button">
                                Sign Up
                            </button>
                        </div>
                        <div class="mb-3">
                            <p class="text-sm">
                                Already have an account?
                                <a href="{% url 'account_login' %}"
                                    style="color: var(--neon-blue); text-decoration: none;">Log in</a>
                            </p>
                        </div>
                    </div>
                </div>
            </form>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
    document.addEventListener("DOMContentLoaded", function () {
        document.querySelectorAll(".toggle-password").forEach(icon => {
            icon.addEventListener("click", function () {
                const targetId = this.getAttribute("data-target");
                const input = document.getElementById(targetId);

                if (input.type === "password") {
                    input.type = "text";
                    this.classList.remove("fa-eye");
                    this.classList.add("fa-eye-slash");
                } else {
                    input.type = "password";
                    this.classList.remove("fa-eye-slash");
                    this.classList.add("fa-eye");
                }
            });
        });
    });
</script>
{% endblock extra_js %}